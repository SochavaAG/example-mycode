<!DOCTYPE html>
<!--[if lt IE 7]><html lang="ru" class="lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html lang="ru" class="lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html lang="ru" class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!-->
<html lang="ru">
<!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <title>Tabs App Store</title>
  <meta name="description" content="Создание адаптивного сайта" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="shortcut icon" href="../../_common/images/favicon.png" />

  <link rel="stylesheet" href="../../_common/css/reset.css" />

  <link rel="stylesheet" href="https://raw.githack.com/SochavaAG/example-mycode/master/pens/slider-slick/plugins/slick/slick.css" />
  <link rel="stylesheet" href="https://raw.githack.com/SochavaAG/example-mycode/master/pens/slider-slick/plugins/slick/slick-theme.css" />

  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
<style>


  /*@media (max-width: 1600px) {
    .ag-apps-tabs_tab {
      margin-right: 11px;
    }
    .ag-apps-subtabs_item {
      width: 83px;
      height: 83px;
    }
    .ag-apps-subtabs_icon {
      width: 67px;
      height: 67px;
      margin-top: 12px;
      margin-bottom: 13px;
      top: 3px;
    }
    .ag-apps_col__left {
      width: 380px;
    }
    .ag-apps_col__right {
      width: calc(100% - 380px);
    }
    .ag-apps-phone_box {
      transform: scale(0.9) rotate(-17deg);
    }
    .js-ag-apps-info_name {
      font-weight: 900;
      font-size: 35px;
      margin-bottom: 30px;
    }
    .js-ag-apps-info_descr {
      font-size: 18px;
      font-weight: 400;
      line-height: 27px;
      margin-bottom: 30px;
    }
    #js-apps::after {
      width: 1000px;
    }

  }
  @media (max-width: 1200px) {
    .ag-apps_col__right {
      position: relative;
    }
    .ag-apps-phone_box {
      position: absolute;
      right: 0;
      opacity: 0.3;
      top: initial;
      bottom: 0;
    }
  }
  @media (max-width: 768px) {
    .ag-apps_col__left {
      width: 100%;
      margin-bottom: 60px;
    }
    .ag-apps_col__right {
      width: 100%;
      padding-left: 0;
      padding-right: 40%;
    }
    #js-apps:after {
      width: 90%;
      height: 977px;
    }
    .ag-apps-phone_box {
      transform: scale(0.9) rotate(11deg);
      right: 20px;
    }
  }
  @media (max-width: 480px) {
    {
      padding: 50px 0;
      min-height: 10px;
    }
    .ag-apps-phone_box {
      opacity: 0.2;
    }
    .ag-apps_col__right {
      padding-right: 0;
    }
    .ag-apps-tabs_tabs {
      flex-flow: nowrap row;
      overflow: hidden;
      overflow-x: auto;
      justify-content: flex-start;
    }
    .ag-apps-tabs_tab {
      flex-flow: nowrap row;
    }
  }*/
</style>

  <div class="ag-format-container">

  </div>

  <section id="js-apps" class="ag-apps-block">
    <div class="ag-format-container">
        <div class="ag-apps_col__left">
          <div class="ag-apps-tabs_title">
            Nullam quis ante
          </div>
          <div class="js-apps-tabs_box ag-apps-tabs_box">
            <div class="js-apps-tabs_tabs ag-apps-tabs_tabs">
              <div class="js-apps-tabs_tab ag-apps-tabs_tab js-ag-active">
                Keys
              </div>
              <div class="js-apps-tabs_tab ag-apps-tabs_tab">
                Man
              </div>
            </div>

            <div class="ag-apps-subtabs-block">
              <ul class="js-apps-subtabs_list ag-apps-subtabs_list js-ag-active">
                <li id="item-1-1" class="js-apps-subtabs_item ag-apps-subtabs_item js-ag-active">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-1.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-2" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-2.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-3" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-3.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-4" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-4.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-5" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-5.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-6" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-6.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-7" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-7.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-8" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-8.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-1-9" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/logo-9.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
              </ul>

              <ul class="js-apps-subtabs_list ag-apps-subtabs_list">
                <li id="item-2-1" class="js-apps-subtabs_item ag-apps-subtabs_item js-ag-active">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-1.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-2" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-2.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-3" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-3.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-4" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-4.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-5" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-5.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-6" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-6.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-7" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-7.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
                <li id="item-2-8" class="js-apps-subtabs_item ag-apps-subtabs_item">
                  <div class="ag-apps-subtabs_icon">
                    <img src="images/ico-8.png" class="ag-apps-subtabs_img" alt="" />
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="ag-apps_col-wrap">
          <div class="ag-apps_col__right">
            <div class="ag-apps_content">
              <div class="ag-apps-phone_box">
                <img src="images/phone.png" class="ag-apps-phone_img" alt="" />

                <div class="js-apps-phone_slides ag-apps-phone_slides">
                  <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/key-1.png" class="ag-apps-phone_slide" alt="Key 1" />
                  <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/key-2.png" class="ag-apps-phone_slide" alt="Key 2" />
                  <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/key-3.png" class="ag-apps-phone_slide" alt="Key 3" />
                  <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/key-4.png" class="ag-apps-phone_slide" alt="Key 4" />
                  <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/key-5.png" class="ag-apps-phone_slide" alt="Key 5" />
                </div>
              </div>
              <div class="js-apps-info_box">
                <div class="js-ag-apps-info_name">Lorem ipsum</div>
                <div class="js-ag-apps-info_descr">
                  Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo
                  ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes,
                  nascetur ridiculus mus.
                </div>
                <div class="ag-apps-info_btn-wrap">
                  <a href="https://play.google.com/store" class="js-ag-apps-info_btn" target="_blank">
                    <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/google-play-btn.png" alt="">
                  </a>
                  <a href="https://www.apple.com/app-store/" class="js-ag-apps-info_btn" target="_blank">
                    <img src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/app-store-btn.png" alt="">
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
  </section>

<!--[if lt IE 9]>
<script src="libs/IE/html5shiv/es5-shim.min.js"></script>
<script src="libs/IE/html5shiv/html5shiv.min.js"></script>
<script src="libs/IE/html5shiv/html5shiv-printshiv.min.js"></script>
<script src="libs/IE/respond/respond.min.js"></script>
<![endif]-->
<script src="js/jquery/jquery-1.11.1.min.js"></script>

<script src="https://raw.githack.com/SochavaAG/example-mycode/master/pens/slider-slick/plugins/slick/slick.min.js"></script>

<script src="js/main.js"></script>
<script>
  (function ($) {
    $(document).ready(function () {

      class Projects {

        constructor() {
          this.section = $('#js-apps');
        }

        selectTab() { /* табы - основные закладки (key, man) */
          var $this = this;
          var tabBtn = this.section.find('.js-apps-tabs_box .js-apps-tabs_tabs');

          tabBtn.find('.js-apps-tabs_tab').bind('click', function () {
            var activeIndex = $(this).index();

            $this.selectContent(activeIndex);

            $(this).addClass('js-ag-active');
            $(this).siblings().removeClass('js-ag-active');
          });
        }

        selectContent(index) {
          var $this = this;

          $this.section.find('.js-apps-subtabs_list').removeClass('js-ag-active');
          $this.section.find('.js-apps-subtabs_list').eq(index).addClass('js-ag-active');

          $this.section.find('.js-apps-subtabs_list').eq(index).find('.js-apps-subtabs_item').eq(0).trigger('click');
        }

        /* Subtabs (App) */
        changeActiveIconApp(argElement) {
          //console.log(argElement);
          //if(argElement.hasClass('js-ag-active')) return false;

          argElement.addClass('js-ag-active');

          argElement.siblings().removeClass('js-ag-active');
        }

        changeActiveContentApp(argData) { /* Loading content for a specific app */
          var $this = this;
          var newContent = "";
          var btnApp = {};

          newContent += '<div class="js-ag-apps-info_name">' + argData.name + '</div>';
          newContent += '<div class="js-ag-apps-info_descr">' + argData.description + '</div>';

          if (argData.platform) {
            newContent += '<div class="ag-apps-info_btn-wrap">';

            $.each(argData.platform, function (argKey, argVal) {
              if (argData.platform[argKey].select_marketplace === 'playmarket') {
                btnApp.img = "https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/google-play-btn.png";
              } else if (argData.platform[argKey]['select_marketplace'] === 'aplstore') {
                btnApp.img = "https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/images/app-store-btn.png";
              }

              newContent += '<a  href="' + argData.platform[argKey]['set_link'] + '" class="js-ag-apps-info_btn" target="_blank"><img src="' + btnApp.img + '" alt=""></a>';
            });

            newContent += '</div>';
          }

          $this.section.find('.js-apps-info_box').html(newContent);
        }

        changeActiveMockupApp(argData) {
          var $this = this;
          var gallery = argData.gallery;

          if (!gallery) return false;

          $this.section.find('.js-apps-phone_slides').slick('unslick');
          $this.section.find('.js-apps-phone_slides').html(' ');

          var newGallery = "";

          $.each(gallery, function (a, b) {
            newGallery += '<img src="' + b.url + '" class="ag-apps-phone_slide" alt="' + b.alt + '"/>';
          });

          $this.section.find('.js-apps-phone_slides').html(newGallery);

          /* slider for "man" tabs */
          $this.section.find('.js-apps-phone_slides').slick({
            arrows: false,
            dots: false,
            //fade: true,
            cssEase: 'linear',
            autoplay: 1,
            slidesToShow: 1,
            //centerMode: true,
            rows: 0
          });
        }

        selectApp() {
          var $this = this;

          $this.section.find('.js-apps-subtabs_item').bind('click', function () {
            //if($(this).hasClass('js-ag-active')) return false;

            $this.changeActiveIconApp($(this));

            var agItemInfo = {},
              agKeyID = $(this).attr('id');

            $.getJSON('https://raw.githack.com/SochavaAG/example-mycode/master/pens/tabs-app-store/js/items-new.json', function(argData) {
              agItemInfo = argData;

              $this.changeActiveContentApp(agItemInfo[agKeyID]);
              $this.changeActiveMockupApp(agItemInfo[agKeyID]);
            });
          });
        }

        initSlider() {
          var $this = this;

          /* slider for "key" tabs */
          $this.section.find('.js-apps-phone_slides').slick({
            arrows: false,
            dots: false,
            //fade: true,
            cssEase: 'linear',
            autoplay: 1,
            slidesToShow: 1,
            //centerMode: true,
            rows: 0
          })
        }

        init() {
          var $this = this;
          $this.selectTab();
          $this.selectApp();
          $this.initSlider();
        }
      }

      var projects = new Projects();
      projects.init();


    });
  })(jQuery);
</script>
</body>
</html>